import{d as O,x as W,z as X,r as T,aC as E,aB as J,a8 as Y,U as C,k as P,l as R,m as l,W as u,j as e,n as a,_ as m,Z as K,F as te,Y as q,al as de,am as re,av as F,Q as he,a3 as xe,ac as ge,at as ke,au as ve,o as Te,aA as Ue,$ as B}from"./utils-01c411e4.js";import{_ as Ce}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-51ed0b2c.js";import{_ as Ne}from"./UiParentCard.vue_vue_type_script_setup_true_lang-76206b3a.js";import{A as Me}from"./AlertBlock-fafdffe4.js";import{C as De}from"./ChipBoolean-fe9e8fcb.js";import{C as Pe}from"./ChipStatus-080e16e4.js";import{_ as N}from"./Explain.vue_vue_type_style_index_0_lang-c016eb46.js";import{c as we,a5 as g,ae as Ie,_ as ne,V as Z,ac as $e}from"./index-bb5b6a82.js";import{V as le}from"./VSwitch-0d2f9673.js";import{V as Se}from"./VTextarea-4511848c.js";import{V as Fe,a as Ge,b as Be,c as qe}from"./VExpansionPanel-a8f53ddb.js";import{V as se,a as j}from"./VRadioGroup-50dd96e8.js";import{V as ue}from"./VForm-d3cbc9ba.js";import{V as ae}from"./VCheckbox-2f0a6ccc.js";import{_ as Ae}from"./ConfirmByInput.vue_vue_type_style_index_0_lang-d347f42d.js";import{_ as Le}from"./ConfirmByClick.vue_vue_type_style_index_0_lang-e00d620b.js";import{V as I}from"./VCol-a8d2bf92.js";import{V as oe}from"./VRow-970d1eb0.js";import"./IconInfoCircle-18798ea0.js";import"./VAlert-29b6aa02.js";import"./Confirm-e9511438.js";var Qe=we("messages","IconMessages",[["path",{d:"M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10",key:"svg-0"}],["path",{d:"M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2",key:"svg-1"}]]);const v=U=>(de("data-v-2969599f"),U=U(),re(),U),ze={class:"mx-auto mt-10",style:{width:"500px"}},Ee=v(()=>u("label",{class:"required"},"模型名称",-1)),Re=v(()=>u("label",{class:"required"},"最长上下文",-1)),We={class:"required"},Ye=v(()=>u("label",{class:"required"},"模型类型",-1)),He=v(()=>u("label",null,"备注",-1)),Ke=v(()=>u("label",null,"基础模型",-1)),je=v(()=>u("label",null,"并行/实例数",-1)),Ze=v(()=>u("label",null,"调度标签",-1)),Je=v(()=>u("label",null,"k8s集群",-1)),Oe=v(()=>u("label",null,"推理类型",-1)),Xe=v(()=>u("label",null,"CPU数量",-1)),el=v(()=>u("label",null,"GPU数量",-1)),ll=v(()=>u("label",null,"内存",-1)),al=O({__name:"PaneModel",emits:["submit"],setup(U,{expose:A,emit:L}){const c=W({operateType:"add",disabledField:!1,maxTokens:5e5,formData:{id:"",modelName:"",maxTokens:0,isFineTuning:!1,enabled:!0,remark:"",parameters:0,providerName:"",modelType:null,baseModelName:null,replicas:0,label:null,k8sCluster:null,inferredType:"",cpu:0,gpu:0,memory:0}}),{formData:o}=X(c),r=L,G=T(),x=T(),V=W({modelName:[i=>E.isModelName({value:i,required:!0})],maxTokens:[i=>i!==""?i<1?"下限 1":i>c.maxTokens?"上限 "+J.commaString(c.maxTokens):!0:"请输入模型最长上下文"],providerName:[i=>i&&i.length>0?!0:"请选择供应"],modelType:[i=>!!i||"请选择模型类型"],replicas:[i=>E.validNumberInput(i,0,50,"",!0)],cpu:[i=>E.validNumberInput(i,0,100,"",!0)],gpu:[i=>E.validNumberInput(i,0,20,"",!0)],memory:[i=>E.validNumberInput(i,0,100,"",!0)]}),$=i=>{i!=="digitalhuman"&&(c.formData.replicas=0,c.formData.label=null,c.formData.k8sCluster=null,c.formData.inferredType="",c.formData.cpu=0,c.formData.gpu=0,c.formData.memory=0)},h=async(i={})=>{const[n,d]=await F.post({...i,showSuccess:!0,url:"/models",data:{...c.formData}});d&&(G.value.hide(),r("submit"))},k=async(i={})=>{const[n,d]=await F.put({...i,showSuccess:!0,url:`/models/${c.formData.id}`,data:{...c.formData}});d&&(G.value.hide(),r("submit"))},w=({valid:i,showLoading:n})=>{i&&(c.operateType=="add"?h({showLoading:n}):k({showLoading:n}))};return A({show({title:i,infos:n={id:"",modelName:"",maxTokens:0,isFineTuning:!1,enabled:!0,remark:"",providerName:"",parameters:0,modelType:null,baseModelName:null,replicas:0,label:null,k8sCluster:null,inferredType:"",cpu:0,gpu:0,memory:0},operateType:d}){G.value.show({title:i,refForm:x}),c.formData=Y.pick(Y.cloneDeep(n),["id","modelName","maxTokens","isFineTuning","enabled","remark","providerName","parameters","modelType","baseModelName","replicas","label","k8sCluster","inferredType","cpu","gpu","memory"]),c.operateType=d,d=="add"?c.disabledField=!1:c.disabledField=!0}}),(i,n)=>{const d=C("Select"),s=C("Pane");return P(),R(s,{ref_key:"refPane",ref:G,class:"",onSubmit:w},{default:l(()=>[u("div",ze,[e(ue,{ref_key:"refForm",ref:x,class:"my-form"},{default:l(()=>[e(g,{density:"compact",variant:"outlined",type:"text",placeholder:"只允许字母、数字、“-” 、“.” 和 “:” ","hide-details":"auto",clearable:"",rules:V.modelName,modelValue:a(o).modelName,"onUpdate:modelValue":n[0]||(n[0]=t=>a(o).modelName=t),disabled:c.disabledField},{prepend:l(()=>[Ee]),_:1},8,["rules","modelValue","disabled"]),e(g,{density:"compact",variant:"outlined",type:"number",placeholder:"上限 "+a(J).commaString(c.maxTokens),"hide-details":"auto",rules:V.maxTokens,modelValue:a(o).maxTokens,"onUpdate:modelValue":n[1]||(n[1]=t=>a(o).maxTokens=t),modelModifiers:{number:!0}},{prepend:l(()=>[Re]),_:1},8,["placeholder","rules","modelValue"]),e(d,{placeholder:"请选择供应商",rules:V.providerName,mapDictionary:{code:"model_provider_name"},modelValue:a(o).providerName,"onUpdate:modelValue":n[2]||(n[2]=t=>a(o).providerName=t),disabled:c.disabledField},{prepend:l(()=>[u("label",We,[m("供应 "),e(N,null,{default:l(()=>[m("供应商指的是外部服务提供，自己有服务请选择Local")]),_:1})])]),_:1},8,["rules","modelValue","disabled"]),e(d,{placeholder:"请选择模型类型",rules:V.modelType,mapDictionary:{code:"model_type"},modelValue:a(o).modelType,"onUpdate:modelValue":[n[3]||(n[3]=t=>a(o).modelType=t),$],disabled:c.disabledField},{prepend:l(()=>[Ye]),_:1},8,["rules","modelValue","disabled"]),e(le,{modelValue:a(o).enabled,"onUpdate:modelValue":n[4]||(n[4]=t=>a(o).enabled=t),color:"primary","hide-details":"auto"},{prepend:l(()=>[u("label",null,[m("启用 "),e(N,null,{default:l(()=>[m("模型是否可被使用，如果关闭则无法使用该模型")]),_:1})])]),_:1},8,["modelValue"]),e(Se,{modelValue:a(o).remark,"onUpdate:modelValue":n[5]||(n[5]=t=>a(o).remark=t),modelModifiers:{trim:!0},placeholder:"请输入"},{prepend:l(()=>[He]),_:1},8,["modelValue"]),e(Ie,null,{default:l(()=>[e(Fe,null,{default:l(()=>[e(Ge,{elevation:"10"},{default:l(()=>[e(Be,{class:"text-h6"},{default:l(()=>[m("高级")]),_:1}),e(qe,{class:"mt-4",eager:""},{default:l(()=>[e(d,{placeholder:"请选择基础模型",modelValue:a(o).baseModelName,"onUpdate:modelValue":n[6]||(n[6]=t=>a(o).baseModelName=t),mapAPI:{url:"/channels/models",data:{providerName:"LocalAI",modelType:"text-generation",baseModelName:"null"},labelField:"modelName",valueField:"modelName"},"hide-details":!1},{prepend:l(()=>[Ke]),_:1},8,["modelValue"]),e(le,{modelValue:a(o).isFineTuning,"onUpdate:modelValue":n[7]||(n[7]=t=>a(o).isFineTuning=t),disabled:c.disabledField,color:"primary"},{prepend:l(()=>[u("label",null,[m("微调 "),e(N,null,{default:l(()=>[m("是否是微调模型")]),_:1})])]),_:1},8,["modelValue","disabled"]),e(g,{density:"compact",variant:"outlined",type:"number",placeholder:"请输入参数量",modelValue:a(o).parameters,"onUpdate:modelValue":n[8]||(n[8]=t=>a(o).parameters=t),modelModifiers:{number:!0},style:{width:"60%"},disabled:c.disabledField},{prepend:l(()=>[u("label",null,[m("参数量(B) "),e(N,null,{default:l(()=>[m("单位是B，代理10亿")]),_:1})])]),_:1},8,["modelValue","disabled"]),a(o).modelType==="digitalhuman"?(P(),K(te,{key:0},[e(g,{type:"number",placeholder:"请输入并行/实例数",rules:V.replicas,modelValue:a(o).replicas,"onUpdate:modelValue":n[9]||(n[9]=t=>a(o).replicas=t),modelModifiers:{number:!0}},{prepend:l(()=>[je]),_:1},8,["rules","modelValue"]),e(d,{placeholder:"请选择调度标签","hide-details":!1,mapDictionary:{code:"model_deploy_label"},modelValue:a(o).label,"onUpdate:modelValue":n[10]||(n[10]=t=>a(o).label=t)},{prepend:l(()=>[Ze]),_:1},8,["modelValue"]),e(d,{placeholder:"请选择k8s集群","hide-details":!1,mapDictionary:{code:"k8s_cluster"},modelValue:a(o).k8sCluster,"onUpdate:modelValue":n[11]||(n[11]=t=>a(o).k8sCluster=t)},{prepend:l(()=>[Je]),_:1},8,["modelValue"]),e(se,{modelValue:a(o).inferredType,"onUpdate:modelValue":n[12]||(n[12]=t=>a(o).inferredType=t),inline:"",color:"primary"},{prepend:l(()=>[Oe]),default:l(()=>[e(j,{label:"CPU",value:"cpu"}),e(j,{label:"GPU",value:"gpu"})]),_:1},8,["modelValue"]),e(g,{type:"number",placeholder:"请输入使用CPU数量",rules:V.cpu,modelValue:a(o).cpu,"onUpdate:modelValue":n[13]||(n[13]=t=>a(o).cpu=t),modelModifiers:{number:!0}},{prepend:l(()=>[Xe]),_:1},8,["rules","modelValue"]),e(g,{type:"number",placeholder:"请输入使用GPU数量",rules:V.gpu,modelValue:a(o).gpu,"onUpdate:modelValue":n[14]||(n[14]=t=>a(o).gpu=t),modelModifiers:{number:!0}},{prepend:l(()=>[el]),_:1},8,["rules","modelValue"]),e(g,{type:"number",placeholder:"请输入内存",rules:V.memory,modelValue:a(o).memory,"onUpdate:modelValue":n[15]||(n[15]=t=>a(o).memory=t),modelModifiers:{number:!0}},{prepend:l(()=>[ll]),"append-inner":l(()=>[m("G")]),_:1},8,["rules","modelValue"])],64)):q("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)])]),_:1},512)}}});const ol=ne(al,[["__scopeId","data-v-2969599f"]]),H=U=>(de("data-v-d19493a6"),U=U(),re(),U),tl={class:"mx-auto mt-10",style:{width:"500px"}},dl=H(()=>u("label",{class:"required"},"模型名称",-1)),rl={class:"required"},nl={class:"required"},sl=H(()=>u("label",{class:"required"},"推理类型",-1)),ul=H(()=>u("label",{class:"required"},"CPU数量",-1)),il={class:"required"},ml=H(()=>u("label",null,"k8s集群",-1)),pl=H(()=>u("label",null,null,-1)),fl=O({__name:"ArrangeModel",emits:["submit"],setup(U,{expose:A,emit:L}){const c=/^\+?[1-9][0-9]*$/,o=W({operateType:"",maxTokens:5e5,id:"",modelName:"",isQuantify:!1,formData:{replicas:"",label:"",cpu:1,gpu:1,maxGpuMemory:"",quantization:"",vllm:"",inferredType:"cpu",k8sCluster:null}}),{formData:r,id:G}=X(o),x=L,V=T(),$=T(),h=(d,s,t,S,p=!1)=>d?d<s?`下限 ${s}`:d>t?`上限 ${t}`:p&&c.test(d)!=!0?"请输入正整数":!0:S||!0,k=W({replicas:[d=>h(d,1,8,"请输入实例数量",!0)],label:[d=>!!d||"请选择调度标签"],gpu:[d=>h(d,1,8,"请输入使用GPU数量",!0)],cpu:[d=>h(d,1,80,"请输入使用CPU数量",!0)],maxGpuMemory:[d=>h(d,1,80,"",!0)],quantization:[d=>!!d||"请选择精度"],isQuantify:[d=>d&&d!=!1?!0:"请开启量化"],vllm:[d=>d&&d!=!1?!0:"请开启VLLM"]}),w=async(d={})=>{o.formData.quantization=o.isQuantify?"float16":""},i=d=>{d==="cpu"?o.formData.gpu=1:o.formData.cpu=1},n=async({valid:d,showLoading:s})=>{if(d){const t={...o.formData};t.inferredType==="cpu"?(t.gpu=0,t.maxGpuMemory=0):t.cpu=0,t.maxGpuMemory=t.maxGpuMemory||0;const[S,p]=await F.post({...s,showSuccess:!0,url:`/api/models/${o.id}/deploy`,data:t});p&&(V.value.hide(),x("submit"))}};return A({show({title:d,infos:s={id:"",modelName:""},operateType:t}){V.value.show({title:d,refForm:$}),o.formData=Y.pick(Y.cloneDeep(s),[]),o.formData.inferredType="cpu",o.formData.cpu=1,o.formData.gpu=1,o.operateType=t,o.modelName=s.modelName,o.id=s.id}}),(d,s)=>{const t=C("Select"),S=C("Pane");return P(),R(S,{ref_key:"refPane",ref:V,class:"",onSubmit:n},{default:l(()=>[u("div",tl,[e(ue,{ref_key:"refForm",ref:$,class:"my-form"},{default:l(()=>[e(g,{"hide-details":"auto",modelValue:o.modelName,"onUpdate:modelValue":s[0]||(s[0]=p=>o.modelName=p),disabled:!0},{prepend:l(()=>[dl]),_:1},8,["modelValue"]),e(g,{type:"number","hide-details":"auto",placeholder:"请输入使用实例数量",rules:k.replicas,modelValue:a(r).replicas,"onUpdate:modelValue":s[1]||(s[1]=p=>a(r).replicas=p),modelModifiers:{number:!0},onInput:s[2]||(s[2]=p=>h(a(r).replicas,1,8,"请输入实例数量",!0)),max:"8"},{prepend:l(()=>[u("label",rl,[m("实例数 "),e(N,null,{default:l(()=>[m("启动实例数量")]),_:1})])]),_:1},8,["rules","modelValue"]),e(t,{"hide-details":"auto",placeholder:"请选择调度标签",rules:k.label,mapDictionary:{code:"model_deploy_label"},modelValue:a(r).label,"onUpdate:modelValue":s[3]||(s[3]=p=>a(r).label=p)},{prepend:l(()=>[u("label",nl,[m("调度标签 "),e(N,null,{default:l(()=>[m("设置实例调度的节点亲和性")]),_:1})])]),_:1},8,["rules","modelValue"]),e(se,{modelValue:a(r).inferredType,"onUpdate:modelValue":[s[4]||(s[4]=p=>a(r).inferredType=p),i],inline:"",color:"primary","hide-details":"auto"},{prepend:l(()=>[sl]),default:l(()=>[e(j,{label:"CPU",value:"cpu"}),e(j,{label:"GPU",value:"gpu"})]),_:1},8,["modelValue"]),a(r).inferredType==="cpu"?(P(),R(g,{key:0,type:"number",placeholder:"请输入使用CPU数量",rules:k.cpu,modelValue:a(r).cpu,"onUpdate:modelValue":s[5]||(s[5]=p=>a(r).cpu=p),modelModifiers:{number:!0},onInput:s[6]||(s[6]=p=>h(a(r).cpu,1,80,"请输入使用CPU数量",!0)),max:"80","hide-details":"auto"},{prepend:l(()=>[ul]),_:1},8,["rules","modelValue"])):q("",!0),a(r).inferredType==="gpu"?(P(),R(g,{key:1,type:"number",placeholder:"请输入使用GPU数量",rules:k.gpu,modelValue:a(r).gpu,"onUpdate:modelValue":s[7]||(s[7]=p=>a(r).gpu=p),modelModifiers:{number:!0},onInput:s[8]||(s[8]=p=>h(a(r).gpu,1,8,"请输入使用GPU数量",!0)),max:"8","hide-details":"auto"},{prepend:l(()=>[u("label",il,[m("GPU数量 "),e(N,null,{default:l(()=>[m("单实例GPU数量")]),_:1})])]),_:1},8,["rules","modelValue"])):q("",!0),a(r).gpu>1?(P(),R(g,{key:2,type:"number",placeholder:"请输入GPU内存",rules:k.maxGpuMemory,modelValue:a(r).maxGpuMemory,"onUpdate:modelValue":s[9]||(s[9]=p=>a(r).maxGpuMemory=p),modelModifiers:{number:!0},onInput:s[10]||(s[10]=p=>h(a(r).maxGpuMemory,1,80,"",!0)),max:"80","hide-details":"auto"},{prepend:l(()=>[u("label",null,[m("GPU内存 "),e(N,null,{default:l(()=>[m("指定每个 GPU 用于存储模型权重的最大内存。这允许它为激活分配更多内存，因此您可以使用更长的上下文长度或更大的批量大小")]),_:1})])]),"append-inner":l(()=>[m(" GiB ")]),_:1},8,["rules","modelValue"])):q("",!0),e(t,{placeholder:"请选择k8s集群","hide-details":"auto",mapDictionary:{code:"k8s_cluster"},modelValue:a(r).k8sCluster,"onUpdate:modelValue":s[11]||(s[11]=p=>a(r).k8sCluster=p)},{prepend:l(()=>[ml]),_:1},8,["modelValue"]),e(ae,{label:"开启量化",modelValue:o.isQuantify,"onUpdate:modelValue":s[12]||(s[12]=p=>o.isQuantify=p),onChange:w,"hide-details":"auto",color:"primary"},{prepend:l(()=>[u("label",null,[m("量化 "),e(N,null,{default:l(()=>[m("对模型启动进行量化，节约显存提升推理速度")]),_:1})])]),_:1},8,["modelValue"]),he(e(t,{placeholder:"请选择精度",mapDictionary:{code:"model_deploy_quantization"},modelValue:a(r).quantization,"onUpdate:modelValue":s[13]||(s[13]=p=>a(r).quantization=p),style:{"margin-top":"-14px"},"hide-details":"auto"},{prepend:l(()=>[pl]),_:1},8,["modelValue"]),[[xe,o.isQuantify]]),e(ae,{style:{"margin-top":"-14px"},label:"开启VLLM",modelValue:a(r).vllm,"onUpdate:modelValue":s[14]||(s[14]=p=>a(r).vllm=p),"hide-details":"auto",color:"primary"},{prepend:l(()=>[u("label",null,[m("VLLM "),e(N,null,{default:l(()=>[m("如果想要高吞吐量批量处理，您可以尝试开启，开启后会占用gpu的所有显存容量")]),_:1})])]),_:1},8,["modelValue"])]),_:1},512)])]),_:1},512)}}});const cl=ne(fl,[["__scopeId","data-v-d19493a6"]]),_l=["onClick"],yl={key:0,style:{width:"80px"},class:"mx-auto mb-4"},bl=u("span",{class:"text-body-2 text-lightText"},"部署中",-1),Vl={key:1},hl={class:"text-primary font-weight-black"},xl=u("br",null,null,-1),gl=u("br",null,null,-1),kl=["innerHTML"],Rl=O({__name:"modelList",setup(U){const{loadDictTree:A,getLabels:L}=ge(),c=ke(),o=ve(),r=W({style:{},formData:{modelName:"",enabled:null,providerName:null,modelType:null},selectedInfo:{id:"",modelName:""},tableInfos:{list:[],total:""},confirmByClickInfo:{html:"",action:"",row:{}}}),{style:G,formData:x}=X(r),V=T(),$=T(),h=T(),k=T(),w=T(),i=T({title:"模型列表"}),n=T([{text:"模型管理",disabled:!1,href:"#"},{text:"模型列表",disabled:!0,href:"#"}]),d=({id:_,modelName:y}={})=>{y?c.push("/model/chat-playground?modelName="+y+"&modelId="+_):c.push("/model/chat-playground")},s=({id:_,modelName:y})=>{c.push(`/model/model-list/detail?jobId=${_}&modelName=`+y)},t=_=>{let y=[];for(let b of _.operation)b=="edit"?y.push({text:"编辑",color:"info",click(){fe(_)}}):b=="delete"?y.push({text:"删除",color:"error",click(){ie(_)}}):b=="deploy"?y.push({text:"部署",color:"info",click(){$.value.show({title:"部署模型",infos:_})}}):b=="undeploy"&&y.push({text:"卸载",color:"info",click(){Y.assign(r.confirmByClickInfo,{html:"确认卸载模型 <span class='text-primary mx-1  font-weight-black'>"+_.modelName+"</span>吗？",action:"undeploy",row:_}),w.value.show({width:"350px"})}});return y},S=(_={})=>{let{action:y,row:b}=r.confirmByClickInfo;y=="deploy"?ce(b,_):y=="undeploy"&&_e(b,_)},p=async(_={})=>{await A(["model_type"]);const[y,b]=await F.get({url:"/models",showLoading:k.value.el,data:{...r.formData,..._}});b?(r.tableInfos.list=b.list,r.tableInfos.total=b.total):(r.tableInfos.list=[],r.tableInfos.total=0)},M=()=>{k.value.query({page:1})},ee=()=>{k.value.query()},ie=_=>{r.selectedInfo=_,h.value.show({width:"400px",confirmText:r.selectedInfo.modelName})},me=async(_={})=>{const[y,b]=await F.delete({..._,showSuccess:!0,url:`/api/models/${r.selectedInfo.id}`});b&&(h.value.hide(),M())},pe=()=>{V.value.show({title:"添加模型",operateType:"add"})},fe=_=>{V.value.show({title:"编辑模型",infos:_,operateType:"edit"})},ce=async(_,y)=>{let[b,Q]=await F.post({...y,showSuccess:!0,url:`/api/models/${_.id}/deploy`});Q&&(w.value.hide(),ee())},_e=async(_,y)=>{let[b,Q]=await F.post({...y,showSuccess:!0,url:`/api/models/${_.id}/undeploy`});Q&&(w.value.hide(),ee())};return Te(()=>{let{modelName:_}=o.query;_&&(r.formData.modelName=_),M()}),(_,y)=>{const b=C("Select"),Q=C("ButtonsInForm"),ye=C("el-tooltip"),D=C("el-table-column"),be=C("ButtonsInTable"),Ve=C("TableWithPager");return P(),K(te,null,[e(Ce,{title:i.value.title,breadcrumbs:n.value},null,8,["title","breadcrumbs"]),e(oe,null,{default:l(()=>[e(I,null,{default:l(()=>[e(Ne,null,{default:l(()=>[e(oe,null,{default:l(()=>[e(I,{cols:"12",lg:"3",md:"4",sm:"6"},{default:l(()=>[e(g,{density:"compact",modelValue:a(x).modelName,"onUpdate:modelValue":y[0]||(y[0]=f=>a(x).modelName=f),label:"搜索模型名称","hide-details":"",clearable:"",variant:"outlined",color:"red",onKeyup:Ue(M,["enter"]),"onClick:clear":M},null,8,["modelValue","onKeyup"])]),_:1}),e(I,{cols:"12",lg:"2",md:"4",sm:"6"},{default:l(()=>[e(b,{onChange:M,label:"请选择状态",mapDictionary:{code:"local_enabled"},modelValue:a(x).enabled,"onUpdate:modelValue":y[1]||(y[1]=f=>a(x).enabled=f)},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",lg:"2",md:"4",sm:"6"},{default:l(()=>[e(b,{onChange:M,label:"请选择模型类型",mapDictionary:{code:"model_type"},modelValue:a(x).modelType,"onUpdate:modelValue":y[2]||(y[2]=f=>a(x).modelType=f)},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",lg:"2",md:"4",sm:"6"},{default:l(()=>[e(b,{onChange:M,label:"请选择供应",mapDictionary:{code:"model_provider_name"},modelValue:a(x).providerName,"onUpdate:modelValue":y[3]||(y[3]=f=>a(x).providerName=f)},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",lg:"3",md:"4",sm:"6"},{default:l(()=>[e(Q,null,{default:l(()=>[e(Z,{color:"primary",onClick:d},{default:l(()=>[m("聊天操场")]),_:1}),e(Z,{color:"primary",onClick:pe},{default:l(()=>[m("添加模型")]),_:1})]),_:1})]),_:1}),e(I,{cols:"12"},{default:l(()=>[e(Me,null,{default:l(()=>[m(" 修改之后将实时生效，请谨慎操作！ ")]),_:1})]),_:1}),e(I,{cols:"12"},{default:l(()=>[e(Ve,{onQuery:p,ref_key:"refTableWithPager",ref:k,infos:r.tableInfos},{default:l(()=>[e(D,{label:"模型",width:"200px",fixed:"left"},{default:l(({row:f})=>[e(ye,{content:"查看详情",placement:"top"},{default:l(()=>[u("span",{class:"link",onClick:z=>s(f)},B(f.modelName),9,_l)]),_:2},1024)]),_:1}),e(D,{label:"最长上下文",width:"110px"},{default:l(({row:f})=>[u("span",null,B(f.maxTokens),1)]),_:1}),e(D,{label:"模型类型",width:"110px"},{default:l(({row:f})=>[u("span",null,B(a(L)([["model_type",f.modelType]])),1)]),_:1}),e(D,{label:"是否启用","min-width":"100px"},{default:l(({row:f})=>[e(Pe,{modelValue:f.enabled,"onUpdate:modelValue":z=>f.enabled=z},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(D,{label:"是否微调","min-width":"100px"},{default:l(({row:f})=>[e(De,{modelValue:f.isFineTuning,"onUpdate:modelValue":z=>f.isFineTuning=z},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(D,{label:"部署","min-width":"150px"},{default:l(({row:f})=>[f.deployStatus=="pending"?(P(),K("div",yl,[e($e,{height:"24",striped:"",indeterminate:"",color:"#4eb879",rounded:"",class:"mx-auto"},{default:l(()=>[bl]),_:1})])):q("",!0),f.enabled&&f.modelType==="text-generation"?(P(),K("div",Vl,[e(Z,{onClick:z=>d(f),"prepend-icon":"mdi-chat",size:"small",variant:"outlined",color:"info"},{prepend:l(()=>[e(a(Qe),{size:16})]),default:l(()=>[m(" 对话 ")]),_:2},1032,["onClick"])])):q("",!0)]),_:1}),e(D,{label:"备注","min-width":"200px","show-overflow-tooltip":""},{default:l(({row:f})=>[m(B(f.remark),1)]),_:1}),e(D,{label:"更新时间","min-width":"200px"},{default:l(({row:f})=>[m(B(a(J).dateFormat(f.updatedAt,"YYYY-MM-DD HH:mm:ss")),1)]),_:1}),e(D,{label:"操作","min-width":"120px",fixed:"right"},{default:l(({row:f})=>[e(be,{buttons:t(f)},null,8,["buttons"])]),_:1})]),_:1},8,["infos"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(ol,{ref_key:"refPaneModel",ref:V,onSubmit:M},null,512),e(cl,{ref_key:"refArrangeModel",ref:$,onSubmit:M},null,512),e(Ae,{ref_key:"refConfirmDelete",ref:h,onSubmit:me},{text:l(()=>[m(" 您将要删除 "),u("span",hl,B(r.selectedInfo.modelName),1),m(" 模型，删除之后，"),xl,m(" 若有使用该模型的应用场景都将取消授权。 "),gl,m("确定要继续吗？ ")]),_:1},512),e(Le,{ref_key:"refConfirmByClick",ref:w,onSubmit:S},{text:l(()=>[u("div",{innerHTML:r.confirmByClickInfo.html},null,8,kl)]),_:1},512)],64)}}});export{Rl as default};
