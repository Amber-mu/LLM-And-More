import{_ as be}from"./NavBack.vue_vue_type_script_setup_true_lang-d7f54046.js";import{ac as ie,i as ge,c as xe,o as ue,U as M,k as v,l as I,m as e,j as a,_ as d,$ as y,n as C,Y as N,W as n,aB as ce,al as ee,am as ae,d as H,au as te,x as G,r as k,aC as Z,av as F,K as Ve,Z as q,a5 as Ie,F as j,z as pe,aD as ke,D as se,a8 as ne}from"./utils-90150bd1.js";import{_ as re}from"./UiParentCard.vue_vue_type_script_setup_true_lang-f5ed374d.js";import{_ as J,ae as R,e as me,V as Y,a5 as z,ah as we}from"./index-1dfe2c6f.js";import{V as T}from"./VCol-dffdd064.js";import{V as W}from"./VRow-cd0d0e3a.js";import{C as Te}from"./CustomUpload-166ed627.js";import{_ as Ce}from"./Explain.vue_vue_type_style_index_0_lang-f3639862.js";import{V as De}from"./VTextarea-817a42c9.js";import{V as Me,a as Pe,b as $e,c as Se}from"./VExpansionPanel-88b14b80.js";import{V as Ue,a as de}from"./VRadioGroup-54cd1fe1.js";import{V as Be}from"./VForm-bc774e64.js";import{i as Le}from"./index-8cd50de6.js";import{V as X}from"./VAlert-0418b51a.js";import{_ as Re}from"./ConfirmByInput.vue_vue_type_style_index_0_lang-94059a05.js";import{_ as _e}from"./ConfirmByClick.vue_vue_type_style_index_0_lang-775336fd.js";import{V as Ge,a as Ee,b as Ne,c as Fe}from"./VWindowItem-183b3f75.js";import"./IconInfoCircle-070867c7.js";import"./Confirm-0cdd4daf.js";const A=b=>(ee("data-v-11edd06b"),b=b(),ae(),b),Ae=A(()=>n("label",null,"供应",-1)),ze=A(()=>n("label",null,"类型",-1)),qe=A(()=>n("label",null,"最长上下文",-1)),je=A(()=>n("label",null,"微调",-1)),Ye=A(()=>n("label",null,"参数量",-1)),We={style:{color:"#539bff"}},He=A(()=>n("label",null,"创建时间",-1)),Je=A(()=>n("label",null,"备注",-1)),Oe={__name:"ModelListDetailBaseInfo",setup(b){const{loadDictTree:P,getLabels:h}=ie(),o=ge("provideModelListDetail"),c=xe(()=>o.rawData),r=async()=>{await P(["model_type"])};return ue(()=>{r()}),(t,D)=>{const x=M("router-link"),w=M("el-tooltip");return v(),I(W,{class:"my-form waterfall"},{default:e(()=>[a(T,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[a(R,{"hide-details":""},{prepend:e(()=>[Ae]),default:e(()=>[d(" "+y(c.value.providerName),1)]),_:1})]),_:1}),a(T,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[a(R,{"hide-details":""},{prepend:e(()=>[ze]),default:e(()=>[d(" "+y(C(h)([["model_type",c.value.modelType]])),1)]),_:1})]),_:1}),a(T,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[a(R,{"hide-details":""},{prepend:e(()=>[qe]),default:e(()=>[d(" "+y(c.value.maxTokens),1)]),_:1})]),_:1}),c.value.isFineTuning?(v(),I(T,{key:0,xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[a(R,{"hide-details":""},{prepend:e(()=>[je]),default:e(()=>[a(w,{content:"微调详情",placement:"top"},{default:e(()=>[a(x,{to:"/model/fine-tuning/detail?jobId="+c.value.jobId,class:"link"},{default:e(()=>[d(y(c.value.isFineTuning?"是":""),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:1})):N("",!0),a(T,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[a(R,{"hide-details":""},{prepend:e(()=>[Ye]),default:e(()=>[n("span",We,y(c.value.parameters)+"B",1)]),_:1})]),_:1}),a(T,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[a(R,{"hide-details":""},{prepend:e(()=>[He]),default:e(()=>[d(" "+y(C(ce).dateFormat(c.value.createdAt,"YYYY-MM-DD HH:mm:ss")),1)]),_:1})]),_:1}),a(T,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[a(R,{"hide-details":""},{prepend:e(()=>[Je]),default:e(()=>[d(" "+y(c.value.remark),1)]),_:1})]),_:1})]),_:1})}}},Qe=J(Oe,[["__scopeId","data-v-11edd06b"]]),B=b=>(ee("data-v-7c045d1f"),b=b(),ae(),b),Ke={class:"mx-auto mt-3",style:{width:"540px"}},Ze=B(()=>n("label",{class:"required"},"评测指标",-1)),Xe=B(()=>n("label",{class:"required"},"待评测数据集",-1)),ea=B(()=>n("label",{class:"required"},"最大输出序列长度",-1)),aa=B(()=>n("label",{class:"required"},"单卡Batch大小",-1)),ta=B(()=>n("label",null,"备注",-1)),la=B(()=>n("label",null,"调度标签",-1)),oa=B(()=>n("label",null,"k8s集群",-1)),sa=B(()=>n("label",null,"推理类型",-1)),na=B(()=>n("label",{class:"required"},"CPU数量",-1)),ra=B(()=>n("label",{class:"required"},"GPU数量",-1)),da={class:"required"},ia=H({__name:"CreatePerformanceEvalPane",emits:["submit"],setup(b,{expose:P,emit:h}){const o=te(),c=G({operateType:"add"}),r=k(""),t=G({modelId:Number(o.query.jobId),fileId:"",evalTargetType:null,maxLength:512,batchSize:32,remark:"",label:null,k8sCluster:null,inferredType:"",cpu:0,gpu:0,maxGpuMemory:""}),D=h,x=k(),w=k(),_=G({fileId:[l=>!!l||"请选择微调文件"],evalTargetType:[l=>!!l||"请选择评测指标"],maxLength:[l=>!!l||"请输入最大输出序列长度"],batchSize:[l=>!!l||"请输入单卡Batch大小"],cpu:[l=>Z.validNumberInput(l,0,100,"请输入使用CPU数量",!0)],gpu:[l=>Z.validNumberInput(l,0,20,"请输入使用GPU数量",!0)],maxGpuMemory:[l=>Z.validNumberInput(l,1,80,"请输入GPU内存",!0)]}),V=({res:l})=>{l&&(t.fileId=l.fileId,r.value=l.filename)},i=()=>{r.value="",t.fileId=""},m=()=>{t.cpu!==1&&(t.cpu=1),t.gpu!==1&&(t.gpu=1)},f=async({valid:l,errors:s,showLoading:S})=>{if(l){const L={...t};t.inferredType==="cpu"?L.gpu=0:L.cpu=0,L.gpu<2&&delete L.maxGpuMemory;const[p,O]=await F.post({showLoading:S,showSuccess:!0,url:"/evaluate/create",data:L});O&&(x.value.hide(),D("submit"))}};return P({show({title:l,operateType:s}){x.value.show({title:l,refForm:w}),c.operateType=s,s=="add"&&(i(),t.evalTargetType=null,t.maxLength=512,t.batchSize=32,t.remark="",t.label=null,t.k8sCluster=null,t.inferredType="",t.cpu=0,t.gpu=0,t.maxGpuMemory="")}}),(l,s)=>{const S=M("Select"),L=M("Pane");return v(),I(L,{ref_key:"refPane",ref:x,onSubmit:f},{default:e(()=>[n("div",Ke,[a(Be,{ref_key:"refForm",ref:w,class:"my-form"},{default:e(()=>[a(S,{placeholder:"请选择评测指标",rules:_.evalTargetType,mapDictionary:{code:"model_evaluate_target_type"},modelValue:t.evalTargetType,"onUpdate:modelValue":s[0]||(s[0]=p=>t.evalTargetType=p)},{prepend:e(()=>[Ze]),_:1},8,["rules","modelValue"]),t.evalTargetType!=="five"?(v(),I(R,{key:0,rules:_.fileId,modelValue:t.fileId,"onUpdate:modelValue":s[1]||(s[1]=p=>t.fileId=p),"hide-details":"auto"},{prepend:e(()=>[Xe]),default:e(()=>[r.value?(v(),I(me,{key:0,closable:"",color:"info","onClick:close":i},{default:e(()=>[d(y(r.value),1)]),_:1})):(v(),I(Te,{key:1,"file-type":[".txt",".json",".jsonl"],isSuffixValid:"",onAfterUpload:V},{trigger:e(()=>[a(Y,{color:"info",variant:"outlined"},{default:e(()=>[d("上传文件")]),_:1})]),_:1},8,["file-type"]))]),_:1},8,["rules","modelValue"])):N("",!0),a(z,{type:"number",placeholder:"请输入最大输出序列长度","hide-details":"auto",rules:_.maxLength,modelValue:t.maxLength,"onUpdate:modelValue":s[2]||(s[2]=p=>t.maxLength=p),modelModifiers:{number:!0}},{prepend:e(()=>[ea]),_:1},8,["rules","modelValue"]),a(z,{type:"number",placeholder:"请输入单卡Batch大小","hide-details":"auto",rules:_.batchSize,modelValue:t.batchSize,"onUpdate:modelValue":s[3]||(s[3]=p=>t.batchSize=p),modelModifiers:{number:!0}},{prepend:e(()=>[aa]),_:1},8,["rules","modelValue"]),a(De,{modelValue:t.remark,"onUpdate:modelValue":s[4]||(s[4]=p=>t.remark=p),modelModifiers:{trim:!0},placeholder:"请输入你微调模型的备注",clearable:""},{prepend:e(()=>[ta]),_:1},8,["modelValue"]),a(R,null,{default:e(()=>[a(Me,null,{default:e(()=>[a(Pe,{elevation:"10"},{default:e(()=>[a($e,{class:"text-h6"},{default:e(()=>[d("高级")]),_:1}),a(Se,{class:"mt-4",eager:""},{default:e(()=>[a(S,{placeholder:"请选择调度标签","hide-details":!1,mapDictionary:{code:"model_deploy_label"},modelValue:t.label,"onUpdate:modelValue":s[5]||(s[5]=p=>t.label=p)},{prepend:e(()=>[la]),_:1},8,["modelValue"]),a(S,{placeholder:"请选择k8s集群","hide-details":!1,mapDictionary:{code:"k8s_cluster"},modelValue:t.k8sCluster,"onUpdate:modelValue":s[6]||(s[6]=p=>t.k8sCluster=p)},{prepend:e(()=>[oa]),_:1},8,["modelValue"]),a(Ue,{modelValue:t.inferredType,"onUpdate:modelValue":[s[7]||(s[7]=p=>t.inferredType=p),m],inline:"",color:"primary"},{prepend:e(()=>[sa]),default:e(()=>[a(de,{label:"CPU",value:"cpu"}),a(de,{label:"GPU",value:"gpu"})]),_:1},8,["modelValue"]),t.inferredType==="cpu"?(v(),I(z,{key:0,type:"number",placeholder:"请输入使用CPU数量",rules:_.cpu,modelValue:t.cpu,"onUpdate:modelValue":s[8]||(s[8]=p=>t.cpu=p),modelModifiers:{number:!0}},{prepend:e(()=>[na]),_:1},8,["rules","modelValue"])):N("",!0),t.inferredType==="gpu"?(v(),I(z,{key:1,type:"number",placeholder:"请输入使用GPU数量",rules:_.gpu,modelValue:t.gpu,"onUpdate:modelValue":s[9]||(s[9]=p=>t.gpu=p),modelModifiers:{number:!0}},{prepend:e(()=>[ra]),_:1},8,["rules","modelValue"])):N("",!0),t.gpu>1?(v(),I(z,{key:2,type:"number",placeholder:"请输入GPU内存",rules:_.maxGpuMemory,modelValue:t.maxGpuMemory,"onUpdate:modelValue":s[10]||(s[10]=p=>t.maxGpuMemory=p),modelModifiers:{number:!0},max:"80","hide-details":"auto"},{prepend:e(()=>[n("label",da,[d("GPU内存 "),a(Ce,null,{default:e(()=>[d("指定每个 GPU 用于存储模型权重的最大内存。这允许它为激活分配更多内存，因此您可以使用更长的上下文长度或更大的批量大小")]),_:1})])]),"append-inner":e(()=>[d(" GiB ")]),_:1},8,["rules","modelValue"])):N("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)])]),_:1},512)}}});const ua=J(ia,[["__scopeId","data-v-7c045d1f"]]);const ca={__name:"GradeRadarChart",setup(b,{expose:P}){const h=k();var o=null;const c=({title:r,radar:t,seriesData:D})=>{o=Le(h.value);const x=D.map(w=>w.name);o.setOption({title:{text:r},legend:{icon:"circle",data:x},radar:t,series:[{type:"radar",data:D}]})};return Ve(()=>{o&&(o.dispose(),o=null)}),we(h,r=>{o==null||o.resize()}),P({initChart:c}),(r,t)=>(v(),q("div",{ref_key:"refChart",ref:h,class:"chart-item w-100 h-100"},null,512))}},pa=J(ca,[["__scopeId","data-v-8ceb45d1"]]),ma=b=>(ee("data-v-6813598c"),b=b(),ae(),b),_a={style:{height:"500px"}},fa=ma(()=>n("h5",{class:"text-h6 text-capitalize"},"建议进一步操作",-1)),ya={class:"text-center mt-1"},va=H({__name:"ViewEvalDetailPane",setup(b,{expose:P}){const h=k(),o=k(),c=G({currentModelId:null,compare1ModelId:null,compare2ModelId:null}),r=k({}),t=[{key:"current",value:"currentModelId",disabled:!0},{key:"compare1",value:"compare1ModelId",disabled:!1},{key:"compare2",value:"compare2ModelId",disabled:!1}],D=G({id:""}),x=()=>{const _={indicator:[{name:"中文能力",max:10,axisLabel:{show:!0}},{name:"推理能力",max:10},{name:"指令遵从能力",max:10},{name:"创新能力",max:10},{name:"阅读理解",max:10}]},V=[];r.value&&t.forEach(i=>{r.value[i.key].value&&V.push({name:r.value[i.key].name,value:r.value[i.key].value})}),o.value.initChart({title:"",radar:_,seriesData:V})},w=async(_=!1)=>{if(_)return;const[V,i]=await F.post({url:"/evaluate/fivegraph",showLoading:h.value.el,data:{currentModelId:c.currentModelId,compare1ModelId:c.compare1ModelId,compare2ModelId:c.compare2ModelId,currentModelEvaluateId:D.id}});i&&(r.value=i,x())};return P({show({title:_,modelId:V,id:i}){h.value.show({width:900,title:_,hasSubmitBtn:!1}),c.currentModelId=parseInt(V),c.compare1ModelId=null,c.compare2ModelId=null,D.id=i,w()}}),(_,V)=>{const i=M("Select"),m=M("Pane");return v(),I(m,{ref_key:"refPane",ref:h},{default:e(()=>[a(W,null,{default:e(()=>{var f;return[a(T,{cols:(f=r.value.current)!=null&&f.isFineTuning?7:12},{default:e(()=>[n("div",_a,[a(pa,{ref_key:"gradeRadarChartRef",ref:o},null,512)])]),_:1},8,["cols"]),r.value.current&&r.value.current.isFineTuning?(v(),I(T,{key:0,cols:"5"},{default:e(()=>[a(X,{type:r.value.current.riskOver?"error":"success",variant:"tonal"},{default:e(()=>[d("过拟合风险")]),_:1},8,["type"]),a(X,{type:r.value.current.riskUnder?"error":"success",variant:"tonal",class:"mt-4"},{default:e(()=>[d("欠拟合风险")]),_:1},8,["type"]),a(X,{type:"info",variant:"tonal",class:"mt-4"},{default:e(()=>[fa,n("div",null,y(r.value.current.remind),1)]),_:1})]),_:1})):N("",!0),a(T,{cols:"12"},{default:e(()=>[a(W,null,{default:e(()=>[(v(),q(j,null,Ie(t,l=>a(T,{cols:"4"},{default:e(()=>{var s;return[a(i,{placeholder:"请选择模型",modelValue:c[l.value],"onUpdate:modelValue":S=>c[l.value]=S,disabled:l.disabled,clearable:!1,mapAPI:{url:"/channels/models",data:{pageSize:-1,providerName:"LocalAI",modelType:"text-generation",evalTag:"five"},labelField:"modelName",valueField:"id"},onChange:S=>w(l.disabled)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"]),n("div",ya,y((s=r.value[l.key])==null?void 0:s.score),1)]}),_:2},1024)),64))]),_:1})]),_:1})]}),_:1})]),_:1},512)}}});const ha=J(va,[["__scopeId","data-v-6813598c"]]),ba={class:""},ga={class:"d-flex"},xa={style:{width:"250px"},class:"mr-4"},Va={style:{width:"250px"}},Ia=n("span",null,"请先部署模型 ",-1),ka=["onClick"],wa=n("span",{class:"text-primary"},"取消",-1),Ta=n("br",null,null,-1),Ca={class:"text-primary font-weight-black"},Da=n("br",null,null,-1),Ma=H({__name:"TabModelEstimate",props:{showArrange:String,modelTitle:String},setup(b){const P=te(),{modelName:h,jobId:o}=P.query,{loadDictTree:c,getLabels:r}=ie(),t=k(),D=k(),x=k(),w=k(),_=k(),V=k(),i=G({style:{},formData:{modelName:"",evalTargetType:""},showTooltip:!1,timer:null,tableInfos:{list:[],total:0},currentJobId:""}),m=G({status:null,evalTargetType:null}),f=G({uuid:null});pe(i);const l=()=>{D.value.show({title:"性能评估",operateType:"add"})},s=g=>{x.value.show({title:"详情",id:g.id,modelId:o})},S=g=>{i.currentJobId=g.uuid,_.value.show({width:"450px",confirmText:i.currentJobId})},L=g=>{f.uuid=g.uuid,V.value.show({width:"450px"})},p=async(g={})=>{const[$,U]=await F.delete({...g,showSuccess:!0,url:`/evaluate/delete/${f.uuid}`});U&&(V.value.hide(),oe())},O=async(g={})=>{const[$,U]=await F.put({...g,showSuccess:!0,url:`/evaluate/cancel/${i.currentJobId}`});U&&(_.value.hide(),oe())},le=async(g={})=>{await c(["model_evaluate_data_type"]);const[$,U]=await F.get({url:"/evaluate/list",showLoading:t.value.el,data:{modelId:o,...m,...g}});U?(i.tableInfos.total=U.total,i.tableInfos.list=U.list||[]):(i.tableInfos.list=[],i.tableInfos.total=0)},Q=()=>{t.value.query({page:1})},oe=()=>{t.value.query()},fe=g=>{let $=[];return g.status=="waiting"||g.status=="running"?$.push({text:"取消",color:"",click(){S(g)}}):$.push({text:"删除",color:"error",click(){L(g)}}),$};return ue(()=>{le()}),(g,$)=>{const U=M("Select"),K=M("el-tooltip"),ye=M("ButtonsInForm"),E=M("el-table-column"),ve=M("ButtonsInTable"),he=M("TableWithPager");return v(),q(j,null,[n("div",ba,[a(W,null,{default:e(()=>[a(T,{cols:"12",class:"d-flex justify-space-between align-center",style:{height:"76px"}},{default:e(()=>[n("div",ga,[n("div",xa,[a(U,{onChange:Q,label:"请选择评估状态",mapDictionary:{code:"model_eval_status"},modelValue:m.status,"onUpdate:modelValue":$[0]||($[0]=u=>m.status=u)},null,8,["modelValue"])]),n("div",Va,[a(U,{onChange:Q,label:"请选择指标",mapDictionary:{code:"model_evaluate_target_type"},modelValue:m.evalTargetType,"onUpdate:modelValue":$[1]||($[1]=u=>m.evalTargetType=u)},null,8,["modelValue"])])]),a(K,{ref:"tooltipRef",visible:i.showTooltip,"popper-options":{modifiers:[{name:"computeStyles",options:{adaptive:!1,enabled:!1}}]},"auto-close":1,"virtual-ref":w.value,"virtual-triggering":"","popper-class":"singleton-tooltip"},{content:e(()=>[Ia]),_:1},8,["visible","virtual-ref"]),a(ye,null,{default:e(()=>[a(Y,{color:"primary",onClick:l},{default:e(()=>[d("创建评估")]),_:1})]),_:1})]),_:1}),a(T,{cols:"12"},{default:e(()=>[a(he,{onQuery:le,ref_key:"refTableWithPager",ref:t,infos:i.tableInfos},{default:e(()=>[a(E,{label:"指标","min-width":"100px"},{default:e(({row:u})=>[d(y(C(r)([["model_evaluate_target_type",u.evalTargetType]])),1)]),_:1}),a(E,{label:"评估状态","min-width":"120px"},{default:e(({row:u})=>[a(K,{disabled:u.status!=="failed",content:u.statusMsg,placement:"top","raw-content":""},{default:e(()=>[a(me,{label:"",size:"small",color:C(ke).statusMap[u.status].color},{default:e(()=>[d(y(C(r)([["model_eval_status",u.status]])),1)]),_:2},1032,["color"])]),_:2},1032,["disabled","content"])]),_:1}),a(E,{label:"数据量","min-width":"100px"},{default:e(({row:u})=>[d(y(u.dataSize),1)]),_:1}),a(E,{label:"评估数据集","min-width":"120px"},{default:e(({row:u})=>[d(y(C(r)([["model_evaluate_data_type",u.dataType]])),1)]),_:1}),a(E,{label:"平均分","min-width":"100px"},{default:e(({row:u})=>[u.evalTargetType==="five"&&u.score>0?(v(),I(K,{key:0,content:"点击可查看五维图指标详情",placement:"top"},{default:e(()=>[n("span",{class:"link",onClick:$a=>s(u)},y(u.score),9,ka)]),_:2},1024)):(v(),q(j,{key:1},[d(y(u.score),1)],64))]),_:1}),a(E,{label:"备注","min-width":"200px","show-overflow-tooltip":""},{default:e(({row:u})=>[d(y(u.remark),1)]),_:1}),a(E,{label:"创建时间","min-width":"160px"},{default:e(({row:u})=>[d(y(C(ce).dateFormat(u.createdAt,"YYYY-MM-DD HH:mm:ss")),1)]),_:1}),a(E,{label:"操作",width:"80px",fixed:"right"},{default:e(({row:u})=>[a(ve,{buttons:fe(u),onlyOne:""},null,8,["buttons"])]),_:1})]),_:1},8,["infos"])]),_:1})]),_:1})]),a(Re,{ref_key:"refConfirmAbort",ref:_,onSubmit:O},{text:e(()=>[d(" 此操作将会"),wa,d("正在进行的模型评估"),Ta,d(" 任务ID："),n("span",Ca,y(i.currentJobId),1),Da,d(" 你还要继续吗？ ")]),_:1},512),a(_e,{ref_key:"refConfirmDelete",ref:V,onSubmit:p},{text:e(()=>[d("确定要删除该评估数据？")]),_:1},512),a(ua,{ref_key:"createPerformanceEvalPaneRef",ref:D,onSubmit:Q},null,512),a(ha,{ref_key:"viewEvalDetailPaneRef",ref:x},null,512)],64)}}});const Pa=["innerHTML"],Ka=H({__name:"modelListDetail",setup(b){const P=te(),h=k(),o=G({tabIndex:"2",style:{},formData:{},rawData:{modelName:"",deployStatus:""},confirmByClickInfo:{html:"",action:"",row:{}}}),{style:c,rawData:r,formData:t}=pe(o);se("provideModelListDetail",o),se("provideModelListDetailed",o),(async()=>{let{jobId:m}=P.query,[f,l]=await F.get({showLoading:!0,url:`/api/models/${m}`});l&&(o.rawData=l)})();const x=(m={})=>{let{action:f,row:l}=o.confirmByClickInfo;f=="deploy"?w(l,m):f=="undeploy"&&_(l,m)},w=async(m,f)=>{let[l,s]=await F.post({...f,showSuccess:!0,url:`/api/models/${m.id}/deploy`,data:{...o.formData,id:m.id}});s&&h.value.hide()},_=async(m,f)=>{let[l,s]=await F.post({...f,showSuccess:!0,url:`/api/models/${m.id}/undeploy`,data:{...o.formData,id:m.id}});s&&h.value.hide()},V=()=>{ne.assign(o.confirmByClickInfo,{html:"确认部署模型 <span class='text-primary mx-1  font-weight-black'>"+o.rawData.modelName+"</span>吗？",action:"deploy",row:o.rawData}),h.value.show({width:"350px"})},i=()=>{ne.assign(o.confirmByClickInfo,{html:"确认卸载模型 <span class='text-primary mx-1  font-weight-black'>"+o.rawData.modelName+"</span>吗？",action:"undeploy",row:o.rawData}),h.value.show({width:"350px"})};return(m,f)=>(v(),q(j,null,[a(be,{backUrl:"/model/model-list/list"},{default:e(()=>[d("模型详情")]),_:1}),a(re,{class:"mt-4"},{header:e(()=>[d(" 模型："+y(C(r).modelName),1)]),action:e(()=>[C(r).deployStatus=="success"||C(r).deployStatus=="running"?(v(),I(Y,{key:0,flat:"",color:"secondary",onClick:i},{default:e(()=>[d("卸载")]),_:1})):N("",!0),C(r).deployStatus=="failed"?(v(),I(Y,{key:1,flat:"",color:"secondary",onClick:V},{default:e(()=>[d("部署")]),_:1})):N("",!0)]),default:e(()=>[a(Qe)]),_:1}),a(re,{class:"mt-5"},{header:e(()=>[a(Ge,{modelValue:o.tabIndex,"onUpdate:modelValue":f[0]||(f[0]=l=>o.tabIndex=l),"align-tabs":"start",color:"primary"},{default:e(()=>[a(Ee,{value:2},{default:e(()=>[d("当前模型下的评估列表")]),_:1})]),_:1},8,["modelValue"])]),default:e(()=>[a(Ne,{modelValue:o.tabIndex,"onUpdate:modelValue":f[1]||(f[1]=l=>o.tabIndex=l)},{default:e(()=>[a(Fe,{value:2},{default:e(()=>[a(Ma,{showArrange:C(r).deployStatus,modelTitle:C(r).modelName},null,8,["showArrange","modelTitle"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(_e,{ref_key:"refConfirmByClick",ref:h,onSubmit:x},{text:e(()=>[n("div",{innerHTML:o.confirmByClickInfo.html},null,8,Pa)]),_:1},512)],64))}});export{Ka as default};
